<html>
	<head>
		<title>Progress Tracker</title>
		<link rel="icon" type="image/x-icon" href="favicon.ico">
		<meta http-equiv="Content-type" content="text/html; charset=utf-8">
		<style>
			body{
				font-family: Arial, Helvetica, sans-serif;
				background-color: #1F1F1F;
			}
			.text{
				display: block;
				text-align: center;
				margin-top: 40px;
				margin-bottom: 20px;
				font-size: 2em;
				color: white;
			}
			.outer{
				border: 1px solid #0F0F0F;
				width: 100%;
				background-color: #292929;
				border-radius: 5px;
			}
			.counter{
				background-color: #7F85F5;
				font-size: 1.2em;
				color: white;
				text-align: center;
				padding-top: 3px;
				padding-bottom: 3px;
				border-radius: 5px;
			}
		</style>
		<script>
			function setWeekNumber(){
				var currentDate = new Date();
				var startDate = new Date(currentDate.getFullYear(), 0, 1);
				var days = Math.floor((currentDate - startDate) /
					(24 * 60 * 60 * 1000));
         
				var weekNo = Math.ceil(days / 7);
				document.getElementById("week").innerHTML = "Week's progress (W" + weekNo + "):";
			}
			
			function getText(number, accuracy){
				number *= 100;
				if(number >= 100){
					return "100%";
				}
				
				if(number == 0){
					return "0%";
				}
				
				if(number%10 == 0){
					return number.toFixed(0)+"%";
				}
				
				return number.toFixed(accuracy)+"%";
			}
			
			function update(){	
				var element = document.getElementById("counter");
				var element2 = document.getElementById("counter2");
				var date = new Date();
				
				var progress = 0.0;
				var weekProgress = (date.getDay()-1)/5;
				
				if(date.getHours() >= 9){
					progress += (date.getHours() - 9)/8;
					progress += date.getMinutes()/60/8;
					progress += date.getSeconds()/60/60/8;
					progress += date.getMilliseconds()/1000/60/60/8;
				}
				
				if(date.getHours() >= 17){
					progress = 1.0;
				}
				
				weekProgress += progress/5;
				
				if(date.getDay() == 0 || date.getDay() == 6){
					weekProgress = 0.0;
					progress = 0.0;
				}
				
				element.innerHTML = getText(progress,3);
				element.style.width = getText(progress,3);
				element2.innerHTML = getText(weekProgress,4);
				element2.style.width = getText(weekProgress,4);
			}
			setInterval(update, 100);
			window.onload = setWeekNumber;
		</script>
	</head>
	<body>
		<div class="text">
			9-to-5 progress (today):
		</div>
		<div class="outer">
			<div id="counter" class="counter"></div>
		</div>
		<div id="week" class="text">
			Week's progress:
		</div>
		<div class="outer">
			<div id="counter2" class="counter"></div>
		</div>
	</body>
</html>
